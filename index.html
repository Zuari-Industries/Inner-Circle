<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inner Circle - Exclusive Membership</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <style>
        /* --- CORE THEME STYLES (FROM NEW DESIGN) --- */
        body {
            background-color: #121212;
            color: #E0E0E0;
            font-family: 'Inter', sans-serif;
        }

        /* Custom Scrollbar Styles */
        /* For Webkit browsers (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1E1E1E;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #CFB53B;
            border-radius: 20px;
            border: 2px solid #1E1E1E;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #E0C95C;
        }

        /* For Firefox */
        html {
            scrollbar-width: thin;
            scrollbar-color: #CFB53B #1E1E1E;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .hero-bg {
            background-color: #1A1A1A;
            background-image:
                radial-gradient(circle at 10% 10%, rgba(207, 181, 59, 0.05) 0%, transparent 30%),
                radial-gradient(circle at 80% 90%, rgba(207, 181, 59, 0.05) 0%, transparent 30%);
        }
        .gold-text { color: #CFB53B; }
        .gold-bg { background-color: #CFB53B; }
        .gold-border { border-color: #CFB53B; }
        .card {
            background-color: #1E1E1E;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: #CFB53B;
        }
        #fundamentals .card {
            cursor: pointer;
        }
        #fundamentals .card.active {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(207, 181, 59, 0.2);
            border-color: #E0C95C;
        }
        #fundamentals-content-wrapper {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.7s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.5s ease-out, margin-top 0.7s ease-out;
        }
        #fundamentals-content-wrapper.open {
            max-height: 1000px; /* Large enough value */
            opacity: 1;
            margin-top: 2rem; /* mt-8 */
        }
        #fundamentals-content-wrapper > .card {
            transition: opacity 0.3s ease-in-out;
        }
        .accordion-item .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .accordion-item.open .accordion-button svg {
            transform: rotate(180deg);
        }
        
        /* New styles for engaging content */
        .content-reveal > * {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .content-reveal.animate-in > * {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Premium Downloadable Card Styles --- */
        #card-to-download {
            background: linear-gradient(145deg, #2d2d2d 0%, #1c1c1c 100%);
            border: 1px solid #4a4a4a;
            position: relative;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        #card-to-download::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background-image: radial-gradient(circle at 20% 20%, rgba(207, 181, 59, 0.1), transparent 40%), radial-gradient(circle at 80% 75%, rgba(207, 181, 59, 0.05), transparent 35%);
            z-index: 1;
        }
        #card-to-download > * {
            position: relative;
            z-index: 2;
        }
        #card-member-name-display {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            letter-spacing: 0.025em;
        }
        
        .btn-gold { transition: all 0.3s ease; }
        .btn-gold:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(207, 181, 59, 0.2);
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* --- FORM STYLES (ADAPTED FOR NEW THEME) --- */
        .form-input, .otp-input {
            color: #E0E0E0;
            background-color: #2a2a2a;
            border: 1px solid #444;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease-in-out;
            border-radius: 0.5rem; /* rounded-lg */
        }
        .form-input::placeholder { color: #777; }
        .form-input:focus, .otp-input:focus {
            border-color: #CFB53B; /* gold-border */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 0 3px rgba(207, 181, 59, 0.2);
            outline: none;
        }
        .otp-input {
            width: 2.75rem; /* w-11 */
            height: 3.25rem; /* h-13 */
            font-size: 1.25rem; /* text-xl */
            text-align: center;
        }
        .indicator {
            background-color: #333;
            color: #888;
            border: 2px solid #444;
            transition: all 0.3s ease;
        }
        .indicator.active {
            background-color: #CFB53B; /* gold-bg */
            color: #121212; /* text-black */
            border-color: #CFB53B;
            box-shadow: 0 0 15px rgba(207, 181, 59, 0.4);
        }
        .progress-line { height: 2px; background-color: #444; position: relative; overflow: hidden; }
        .progress-line-fill { position: absolute; top: 0; left: 0; height: 100%; background-color: #CFB53B; width: 0; transition: width 0.5s ease-in-out; }
        .progress-line-fill.active { width: 100%; }
        
        .card-loader {
            width: 20px; height: 20px; border-radius: 50%; display: inline-block;
            margin-right: 12px; border: 3px solid;
            border-color: #CFB53B #555 #555 transparent;
            animation: rotation 1s infinite linear;
        }
        @keyframes rotation { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .form-step { display: none; transition: opacity 0.4s ease-in-out; opacity: 0; }
        .form-step.active { display: block; opacity: 1; }
        #toast {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            z-index: 9999;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        #toast.show { top: 20px; }
        .form-input.error, .otp-input.error { border-color: #ef4444 !important; }
        .otp-input.success { border-color: #22c55e; }
        
        /* Gift Icon Animation */
        .gift-icon-container {
            position: relative;
            width: 100px;
            height: 100px;
            cursor: pointer;
            z-index: 1; /* Ensure it's above other elements if needed */
        }

        /* New "Treasure Shine" Effect */
        .gift-icon-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(207, 181, 59, 0.7) 0%, rgba(207, 181, 59, 0) 70%);
            animation: treasure-shine 3.5s infinite cubic-bezier(0.25, 1, 0.5, 1);
            z-index: -1; /* Place the glow behind the SVG */
        }
        
        @keyframes treasure-shine {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            40% {
                transform: translate(-50%, -50%) scale(1.4);
                opacity: 0.7;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.6);
                opacity: 0;
            }
        }
        
        /* New Subtle Pulse for "Limited Slots" Badge */
        @keyframes subtle-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 15px rgba(207, 181, 59, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 25px rgba(207, 181, 59, 0.8);
            }
        }

        .gift-svg {
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .gift-icon-container:hover .gift-svg {
            transform: scale(1.05);
        }
        .gift-icon-container:hover .gift-lid-group {
            transform: translateY(-8px);
        }
        .gift-lid-group {
            transform-origin: bottom;
            transition: transform 0.3s ease-in-out;
            transform-style: preserve-3d;
        }
        .gift-icon-container.open .gift-lid-group {
            transform: translateY(-50px) rotateX(-90deg);
        }
        
        @keyframes glitter {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .shining-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0) 100%);
            animation: glitter 2s infinite ease-in-out;
            pointer-events: none;
            z-index: 10;
        }

        /* Pop-up Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #1A1A1A;
            border: 2px solid #CFB53B;
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 640px; /* Increased max-width */
            text-align: center;
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.3s ease;
            position: relative;
        }
        .modal-overlay.open .modal-content {
            transform: scale(1);
        }
        .modal-step {
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
        }
        .modal-step.active {
            display: block;
            opacity: 1;
        }
    </style>
</head>
<body class="antialiased">
    
    <div id="toast" class="py-3 px-6 rounded-lg shadow-xl"><span id="toast-message"></span></div>

    <!-- The Interactive Gift Modal -->
    <div id="interactive-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-white transition-colors z-20">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            
            <!-- Step 1: Name Input -->
            <div id="modal-name-step" class="modal-step active">
                <h4 class="font-serif text-3xl gold-text mb-2">Congrats! You've found the secret.</h4>
                <p class="text-gray-300 mb-6 text-lg">Enter your name to claim your personalized Founder's Card.</p>
                <div class="mb-4">
                    <input id="modal-name-input" placeholder="Enter your full name" class="form-input mt-1 block w-full px-4 py-3 text-center text-lg" aria-invalid="false">
                </div>
                <button id="claim-card-btn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-3 px-4 rounded-full mt-6 btn-gold text-lg">
                    <span class="btn-text">Claim Your Card</span>
                </button>
            </div>

            <!-- Step 2: Card Display & Download -->
            <div id="modal-card-step" class="modal-step">
                <div id="card-to-download" class="rounded-2xl p-8 aspect-[1.586] flex flex-col text-white">
                    <!-- Top Section -->
                    <div class="flex justify-between items-start">
                        <div class="text-left">
                            <h5 class="font-serif text-2xl font-bold">Zuari Finserv</h5>
                            <p class="text-xl font-serif gold-text">Inner Circle</p>
                        </div>
                        <div class="w-16 h-16">
                            <svg class="w-full h-full text-gray-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="48" stroke="currentColor" stroke-width="3"/>
                                <path d="M50 25V75" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <path d="M25 50H75" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <path d="M32.322 32.322L67.678 67.678" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <path d="M32.322 67.678L67.678 32.322" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                                <circle cx="50" cy="50" r="12" stroke="#CFB53B" stroke-width="3"/>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- Spacer -->
                    <div class="flex-grow"></div>
                    
                    <!-- Bottom Section -->
                    <div class="text-left">
                        <p id="card-member-name-display" class="font-serif text-2xl font-bold truncate">TANUSH ANGRISH</p>
                        <p class="text-sm text-gray-400">Proud Member</p>
                        <div class="flex justify-between items-end mt-2 pt-2 border-t border-gray-700">
                            <p id="card-member-id" class="font-mono text-xs text-gray-500">IC-ZF-XXXX-XXXX</p>
                            <p class="font-serif text-xs gold-text italic">"Because Family Deserves the Best."</p>
                        </div>
                    </div>
                </div>
                <button id="download-card-btn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-3 px-4 rounded-full mt-6 btn-gold text-lg">
                    <span class="btn-text">Download Card</span>
                </button>
            </div>
        </div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-30 backdrop-blur-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-semibold gold-text font-serif">The Inner Circle</h1>
            <nav class="hidden md:flex space-x-8">
                <a href="#fundamentals" class="text-gray-300 hover:gold-text transition-colors">Fundamentals</a>
                <a href="#register" class="text-gray-300 hover:gold-text transition-colors">Register</a>
            </nav>
            <a href="#register" class="hidden md:inline-block px-5 py-2 text-black gold-bg rounded-full font-bold btn-gold">Join Now</a>
        </div>
    </header>

    <main id="home">
        <section class="hero-bg min-h-screen flex flex-col items-center justify-center text-center p-6 pt-20">
            <div class="grid md:grid-cols-2 gap-10 max-w-7xl w-full text-left md:text-center mt-auto md:mt-0 items-center justify-center">
                <!-- Left Column (Existing Content) -->
                <div class="max-w-2xl mx-auto md:text-left fade-in">
                    <h2 class="text-4xl md:text-6xl lg:text-7xl font-serif font-extrabold text-white leading-tight">
                        Welcome to the <span class="gold-text">Inner Circle</span> — Your Exclusive Gateway to Wealth & Wisdom.
                    </h2>
                    <p class="mt-6 text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">
                        This invitation is your foundational benefit as a valued employee, offered exclusively to you before our public launch. Secure your place today.
                    </p>
                </div>

                <!-- Right Column (Combined Perks and Form) -->
                <div id="register" class="relative bg-gray-800 p-4 rounded-2xl border-t-4 border-l-2 gold-border shadow-xl w-full max-w-lg mx-auto md:text-left fade-in self-center" style="transition-delay: 200ms;">
                    <!-- Perks Section -->
                    <div>
                        <div class="absolute top-0 right-0 -mt-3 -mr-3">
                            <span class="relative inline-flex items-center justify-center rounded-full h-14 w-14 gold-bg text-black text-xs font-bold text-center leading-tight" style="animation: subtle-pulse 3s infinite ease-in-out;">
                                Limited<br>Slots
                            </span>
                        </div>
                        <div class="text-center">
                            <div id="gift-icon-container" class="gift-icon-container mx-auto" role="button" aria-label="Open exclusive gift" style="width: 64px; height: 64px;">
                                 <svg class="w-16 h-16 relative" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g class="gift-svg">
                                        <g class="gift-lid-group">
                                            <path d="M50 20L65 35L35 35Z" fill="#CFB53B"/>
                                            <path d="M30 25L70 25L50 10Z" fill="#CFB53B" opacity="0.8"/>
                                        </g>
                                        <g class="gift-box-group">
                                            <path d="M15 35L85 35L85 85L15 85Z" fill="#E0C95C"/>
                                            <path d="M15 85L85 85L70 95L30 95Z" fill="#CFB53B"/>
                                            <path d="M15 35L30 35L30 85L15 85Z" fill="#CFB53B"/>
                                            <path d="M70 35L85 35L85 85L70 85Z" fill="#CFB53B"/>
                                            <path d="M15 35L85 35L85 25L15 25Z" fill="transparent" stroke="#000" stroke-width="0"/>
                                        </g>
                                        <g class="ribbon-group">
                                            <path d="M45 20L55 20L55 85L45 85Z" fill="#7D6620"/>
                                            <path d="M15 55L85 55L85 45L15 45Z" fill="#7D6620"/>
                                        </g>
                                        <g class="bow-group">
                                            <path d="M50 10 Q40 20 50 30 Q60 20 50 10" fill="#CFB53B" stroke="#A58A2B" stroke-width="1"/>
                                            <path d="M45 15L55 15Q55 20 50 25Q45 20 45 15Z" fill="#CFB53B"/>
                                        </g>
                                        <rect class="shining-effect" width="100%" height="100%" />
                                    </g>
                                </svg>
                            </div>
                            <h4 class="font-serif text-2xl font-bold text-white mb-4 mt-2">Inner Circle Perks</h4>
                        </div>
                        <div class="grid grid-cols-2 gap-x-4 gap-y-4">
                            <!-- Benefit 1: Double SIP -->
                            <div class="flex items-start space-x-3">
                                <div class="w-10 h-10 flex-shrink-0 bg-black bg-opacity-20 rounded-lg flex items-center justify-center border border-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 gold-text" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12" /></svg>
                                </div>
                                <div>
                                    <p class="font-extrabold text-white text-base leading-tight">Double SIP</p>
                                    <p class="text-gray-400 text-sm">We <span class="gold-text font-semibold">match</span> your first three.</p>
                                </div>
                            </div>
                            <!-- Benefit 2: RM in 24 hrs -->
                            <div class="flex items-start space-x-3">
                                <div class="w-10 h-10 flex-shrink-0 bg-black bg-opacity-20 rounded-lg flex items-center justify-center border border-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 gold-text" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                </div>
                                <div>
                                    <p class="font-extrabold text-white text-base leading-tight">RM in 24 Hrs</p>
                                    <p class="text-gray-400 text-sm">A dedicated manager calls <span class="gold-text font-semibold">you</span>.</p>
                                </div>
                            </div>
                            <!-- Benefit 3: Zero Fees -->
                            <div class="flex items-start space-x-3">
                                <div class="w-10 h-10 flex-shrink-0 bg-black bg-opacity-20 rounded-lg flex items-center justify-center border border-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 gold-text" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                                </div>
                                <div>
                                    <p class="font-extrabold text-white text-base leading-tight">Zero Fees</p>
                                    <p class="text-gray-400 text-sm">Your first year is on <span class="gold-text font-semibold">us</span>.</p>
                                </div>
                            </div>
                            <!-- Benefit 4: Masterclass -->
                            <div class="flex items-start space-x-3">
                                <div class="w-10 h-10 flex-shrink-0 bg-black bg-opacity-20 rounded-lg flex items-center justify-center border border-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 gold-text" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M12 14l9-5-9-5-9 5 9 5z" /><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20M12 14L8 12" /></svg>
                                </div>
                                <div>
                                    <p class="font-extrabold text-white text-base leading-tight">Masterclass</p>
                                    <p class="text-gray-400 text-sm">Free entry to <span class="gold-text font-semibold">VIP</span> workshops.</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="flex justify-between items-center text-xs text-gray-400 mb-1 font-semibold">
                                <span>FOUNDER AVAILABILITY</span>
                                <span>FILLING FAST</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div id="scarcity-bar" class="gold-bg h-2 rounded-full" style="width: 0%; transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <hr class="my-4 border-gray-700">

                    <!-- Form Section -->
                    <div id="main-form-container">
                        <button id="back-button" class="hidden absolute top-4 left-4 text-gray-400 hover:text-white transition-colors z-10" aria-label="Go back"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
                        <h2 class="font-serif text-lg sm:text-xl font-bold text-center text-white mb-2">Membership Registration</h2>
                        
                        <div class="flex items-center justify-center my-4">
                            <div class="flex items-center"><div id="indicator-1" class="indicator w-6 h-6 rounded-full flex items-center justify-center font-bold text-sm">1</div></div>
                            <div class="flex-auto mx-3 progress-line"><div id="progress-line-1" class="progress-line-fill"></div></div>
                            <div class="flex items-center"><div id="indicator-2" class="indicator w-6 h-6 rounded-full flex items-center justify-center font-bold text-sm">2</div></div>
                        </div>

                        <div id="step-container" class="relative min-h-[230px]">
                            <div id="step1" class="form-step">
                                <div class="mb-2"><label for="email" class="block text-sm font-medium mb-1 text-gray-300">Official Email</label><input id="email" type="email" placeholder="you@adventz.com" class="form-input mt-1 block w-full px-3 py-2" aria-invalid="false" aria-describedby="email-error"><p id="email-error" class="text-red-400 text-xs mt-1 h-4"></p></div>
                                <button id="sendOtpBtn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-2 px-4 rounded-full disabled:opacity-50 disabled:cursor-not-allowed mt-4 btn-gold text-sm"><span class="btn-text">Request Access</span></button>
                            </div>

                            <div id="step2" class="form-step">
                                <div class="mb-4"><label class="block text-sm font-medium text-center mb-2 text-gray-300">Enter OTP sent to your Email</label><div id="email-otp-inputs" class="flex justify-center space-x-1 sm:space-x-2"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"><input type="text" maxlength="1" class="otp-input email-otp" inputmode="numeric" style="width: 2.25rem; height: 2.75rem; font-size: 1.125rem;"></div><p id="emailOtpInfo" class="text-sm text-red-400 text-center h-5 mt-2"></p></div>
                                <button id="verifyOtpBtn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-2 px-4 rounded-full disabled:opacity-50 btn-gold text-sm"><span class="btn-text">Verify & Join</span></button>
                                <div class="text-center mt-3 text-xs text-gray-400"><span id="otpTimer"></span><button id="resendOtpBtn" class="gold-text hover:underline ml-1 disabled:opacity-50 disabled:cursor-not-allowed" disabled>Resend Email</button></div>
                            </div>

                            <div id="success-screen" class="form-step text-center pt-6">
                                <svg class="w-12 h-12 mx-auto text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <h2 class="font-serif text-xl font-bold mt-3 text-white">Membership Confirmed!</h2>
                                <p class="text-gray-300 mt-2 text-sm">Welcome to the Inner Circle. Your dedicated Relationship Manager will contact you within 24 hours to get you started.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- CTA button below the two-column hero content -->
            <a href="#register" class="mt-16 inline-block px-10 py-4 text-lg font-bold text-black gold-bg rounded-full btn-gold">
                Claim Your Membership
            </a>
        </section>

        <!-- NEW, CREATIVE SECTION: What is the Inner Circle? -->
        <section class="py-16 md:py-24 bg-black bg-opacity-20">
            <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">What is the Inner Circle?</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <!-- Exclusive Access Card -->
                    <div class="card p-10 rounded-2xl flex flex-col items-center text-center fade-in" style="transition-delay: 200ms;">
                        <div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.283.356-1.857m0 0a3.001 3.001 0 015.63-1.293m-5.986 0A3.001 3.001 0 017 14c0-1.657 1.343-3 3-3s3 1.343 3 3a3.001 3.001 0 01-2.014 2.853m-5.986 0l-2.014-2.853M17 14a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        </div>
                        <h4 class="font-serif text-3xl font-bold text-white mb-3">Your Exclusive Family</h4>
                        <p class="text-gray-400 text-lg leading-relaxed">Only for Zuari Finserv employees, the Inner Circle is more than a program—it’s a <strong class="gold-text font-bold">trusted family</strong> where your growth matters <strong class="gold-text font-bold">most</strong>.</p>
                    </div>

                    <!-- Delivered Growth Card -->
                    <div class="card p-10 rounded-2xl flex flex-col items-center text-center fade-in" style="transition-delay: 400ms;">
                        <div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>
                        </div>
                        <h4 class="font-serif text-3xl font-bold text-white mb-3">Growth That's Handpicked</h4>
                        <p class="text-gray-400 text-lg leading-relaxed">We choose the best mutual funds for you, so your money grows <strong class="gold-text font-bold">wisely</strong>. No guesswork, just strategies you can <strong class="gold-text font-bold">trust</strong>—because family deserves the <strong class="gold-text font-bold">best</strong>.</p>
                    </div>

                    <!-- Unmatched Benefits Card -->
                    <div class="card p-10 rounded-2xl flex flex-col items-center text-center fade-in" style="transition-delay: 600ms;">
                        <div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v1h2a1 1 0 011 1v3a1 1 0 01-1 1h-2v1a2 2 0 01-2 2H7a2 2 0 01-2-2v-1H3a1 1 0 01-1-1V7a1 1 0 011-1h2V5z" /></svg>
                        </div>
                        <h4 class="font-serif text-3xl font-bold text-white mb-3">Exclusive Family Benefits</h4>
                        <p class="text-gray-400 text-lg leading-relaxed">Double contributions, zero fees, personal guidance, and <strong class="gold-text font-bold">VIP access</strong> to top opportunities. Here, you get only the <strong class="gold-text font-bold">finest</strong>, because in our family, <strong class="gold-text font-bold">nothing less will do</strong>.</p>
                    </div>
                </div>
                <a href="#register" class="mt-12 inline-block px-10 py-4 text-lg font-bold text-black gold-bg rounded-full btn-gold fade-in" style="transition-delay: 800ms;">
                    Claim Your Membership Today
                </a>
            </div>
        </section>

        <!-- NEW SECTION: Why Does the Inner Circle Exist? -->
        <section class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-24 items-center">
                    <div class="fade-in">
                        <h3 class="font-serif text-3xl md:text-5xl font-bold text-white">Why Does the Inner Circle Exist?</h3>
                        <p class="mt-4 text-gray-400 text-lg max-w-2xl">
                            For years, investing has felt complicated. Markets go up and down, information is overwhelming, and many employees feel they are “too late” or “too busy.” The Inner Circle was built to change that.
                        </p>
                        <div class="mt-8 p-6 bg-gray-900 rounded-xl border-t-2 border-r-2 border-b-8 border-l-2 gold-border text-center">
                            <p class="font-serif text-3xl gold-text italic">"This is not just a benefit—it’s Zuari Finserv investing directly in your future."</p>
                        </div>
                    </div>
                    <div>
                        <ul class="space-y-6">
                            <li class="card p-6 rounded-2xl fade-in" style="transition-delay: 200ms;">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-12 h-12 gold-bg rounded-full flex items-center justify-center mr-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-3-3v6m-4-3H5a2 2 0 00-2 2v6a2 2 0 002 2h14a2 2 0 002-2v-6a2 2 0 00-2-2h-4"/></svg>
                                    </div>
                                    <div>
                                        <h4 class="font-serif text-xl font-bold text-white">Clarity Over Confusion</h4>
                                        <p class="mt-1 text-gray-400">No jargon. No noise. Just simplified, actionable insights you can use the same day.</p>
                                    </div>
                                </div>
                            </li>
                            <li class="card p-6 rounded-2xl fade-in" style="transition-delay: 400ms;">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-12 h-12 gold-bg rounded-full flex items-center justify-center mr-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2v10a2 2 0 01-2 2H9a2 2 0 01-2-2V9a2 2 0 012-2h6zM11 5a2 2 0 100 4 2 2 0 000-4z"/></svg>
                                    </div>
                                    <div>
                                        <h4 class="font-serif text-xl font-bold text-white">Access That Others Don’t Have</h4>
                                        <p class="mt-1 text-gray-400">Be the first to learn about opportunities and strategies usually reserved for the “already wealthy.”</p>
                                    </div>
                                </div>
                            </li>
                            <li class="card p-6 rounded-2xl fade-in" style="transition-delay: 600ms;">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-12 h-12 gold-bg rounded-full flex items-center justify-center mr-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14c-1.886 0-3.693.385-5.118 1.096A9.972 9.972 0 002 20h20a9.972 9.972 0 00-4.882-3.904C15.693 14.385 13.886 14 12 14z" /></svg>
                                    </div>
                                    <div>
                                        <h4 class="font-serif text-xl font-bold text-white">A Personal Wealth Ally</h4>
                                        <p class="mt-1 text-gray-400">Someone on-call who knows your story and guides you—not a chatbot, not a call center.</p>
                                    </div>
                                </div>
                            </li>
                            <li class="card p-6 rounded-2xl fade-in" style="transition-delay: 800ms;">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-12 h-12 gold-bg rounded-full flex items-center justify-center mr-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M5 21v-4M3 19h4m16-4v-4m-4 4h4m-4 8v-4m4 4h-4M15 5v2m-2-2h4M10 20v-4m-2 4h4m-4-8h4m-4 4h4m-4-4v-4m4 4v4m0-8h-4m4-4h-4M12 4a8 8 0 100 16 8 8 0 000-16z" /></svg>
                                    </div>
                                    <div>
                                        <h4 class="font-serif text-xl font-bold text-white">An Inner Advantage</h4>
                                        <p class="mt-1 text-gray-400">Limited seats, real exclusivity—because wealth grows best when it’s nurtured, not mass-produced.</p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="fundamentals" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 max-w-3xl mx-auto">
                    <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">The Foundations of Financial Growth</h3>
                    <p class="mt-4 text-gray-400 text-lg fade-in" style="transition-delay: 100ms;">Trust begins with clarity. We’ve broken down the essentials into simple, powerful modules. No jargon, just knowledge.</p>
                </div>
                <div id="fundamentals-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="card p-8 rounded-2xl fade-in" style="transition-delay: 200ms;"><div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg></div><h4 class="font-serif text-2xl font-bold text-white mb-3">Why Invest?</h4><p class="text-gray-400"></p></div>
                    <div class="card p-8 rounded-2xl fade-in" style="transition-delay: 300ms;"><div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg></div><h4 class="font-serif text-2xl font-bold text-white mb-3">Asset Classes</h4><p class="text-gray-400"></p></div>
                    <div class="card p-8 rounded-2xl fade-in" style="transition-delay: 400ms;"><div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 6v-1m0 1H9m3 0h3m-3 10v-1m0 1H9m3 0h3m-6 0a9 9 0 1112 0v-1a9 9 0 01-12 0v1zm12 0a9 9 0 10-12 0v-1a9 9 0 0012 0v1z"/></svg></div><h4 class="font-serif text-2xl font-bold text-white mb-3">SIP & Compounding</h4><p class="text-gray-400"></p></div>
                    <div class="card p-8 rounded-2xl fade-in" style="transition-delay: 500ms;"><div class="w-16 h-16 gold-bg rounded-xl flex items-center justify-center mb-6"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg></div><h4 class="font-serif text-2xl font-bold text-white mb-3">Common Myths</h4><p class="text-gray-400"></p></div>
                </div>
                <!-- Dynamic content will be inserted here by JavaScript -->
            </div>
        </section>

    </main>

    <footer class="bg-black py-8">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 The Inner Circle. All Rights Reserved.</p>
            <p class="text-sm mt-2">This is an exclusive employee benefit program.</p>
        </div>
    </footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
    const API_BASE_URL = 'http://localhost:3000';
    let currentOtpSession = { email:'', empId:'', mobile:'' };
    let otpExpiryTime = 0;
    let otpTimerInterval = null;
    let steps = ['step1', 'step2', 'success-screen'];
    
    const fundamentalsData = {
          "boxes": [
            {
              "title": "Why Invest",
              "snippet": "Turn your savings into real wealth. Make your money work harder than inflation, grow steadily, and achieve your long-term goals…",
              "content": "Investing is essential to protect your money from **inflation**. It helps your savings grow faster than keeping money idle. By investing wisely, you can achieve long-term goals like buying a home, planning retirement, or building financial security. Key points:\n- Outpaces inflation and **preserves purchasing power**.\n- Enables **wealth growth** over time.\n- Helps achieve long-term **personal and financial goals**."
            },
            {
              "title": "Asset Classes",
              "snippet": "Equity, Debt, Mutual Funds, Gold – understand what each does and build a balanced, diversified portfolio for steady growth…",
              "content": "Different asset classes serve different purposes in a portfolio. Key points:\n- **Equity**: High growth potential, moderate to high risk.\n- **Debt**: Stable returns, low to moderate risk.\n- **Mutual Funds**: Diversified investment with professional management.\n- **Gold**: Hedge against inflation and safe-haven asset.\nBy combining them, you can **balance risk and reward** while achieving long-term wealth growth."
            },
            {
              "title": "SIP & Compounding",
              "snippet": "Small, regular investments can grow exponentially over time. Start early, stay consistent, and let compounding work its magic…",
              "content": "**SIP** (Systematic Investment Plan) allows you to invest small amounts regularly instead of lump sums. Combined with **compounding**, even modest investments can snowball over time. Key points:\n- Invest small, **consistently, and early**.\n- Reinvest returns to **maximize growth**.\n- Compounding **accelerates wealth creation** over long periods.\n- **Discipline and consistency** are more important than timing the market."
            },
            {
              "title": "Common Myths",
              "snippet": "Think investing is only for experts or requires a fortune? Let’s bust 4 common myths employees often believe…",
              "content": [
                {"myth": "Investing is only for experts.", "truth": "Anyone can start with simple products like **SIPs or mutual funds**. You don’t need expert knowledge to begin."},
                {"myth": "You need a lot of money to start.", "truth": "Even small amounts, like **₹500/month**, can grow significantly over time through regular investment and compounding."},
                {"myth": "Investing is risky and unpredictable.", "truth": "**Diversification** across asset classes and a **long-term approach** mitigates risks and smooths returns."},
                {"myth": "I need to perfectly time the market.", "truth": "**Regular investing** through SIPs and staying invested long-term consistently outperforms trying to time the market."}
              ]
            }
          ]
        };

    function formatToE164(number) {
        const digits = number.replace(/\D/g, '');
        return digits.startsWith('91') ? `+${digits}` : `+91${digits}`;
    }

    async function sendOtp() {
        if (!validateStep1() || document.getElementById('sendOtpBtn').disabled) return;
        const [emailEl, sendBtn] = [document.getElementById('email'), document.getElementById('sendOtpBtn')];
        toggleButtonLoading(sendBtn, true, 'Requesting...');
        try {
            const res = await fetch(`${API_BASE_URL}/api/send-otp`, {
                method:'POST',
                headers:{ 'Content-Type':'application/json' },
                body: JSON.stringify({ email: emailEl.value.trim() }) // Simplified payload
            });
            const j = await res.json();
            if (j.ok) {
                currentOtpSession = { email: emailEl.value.trim() };
                showToast('Verification code sent to your email.');
                show('step2', true);
                document.getElementById('resendOtpBtn').disabled = false;
                otpExpiryTime = Date.now() + 5 * 60 * 1000;
                startOtpTimer();
                disableResendBtnGlobal(30);
            } else { showToast('Error: ' + (j.err || 'Unknown error'), true); }
        } catch (err) { showToast('A network error occurred. Please try again.', true); console.error(err); }
        finally { toggleButtonLoading(sendBtn, false, 'Request Access'); }
    }

    async function verifyOtpAndConfirm() {
        const verifyBtn = document.getElementById('verifyOtpBtn');
        if (verifyBtn.disabled) return;
        toggleButtonLoading(verifyBtn, true, 'Verifying...');
        const emailOtp = getOtpValue('email-otp');
        const emailOtpInfo = document.getElementById('emailOtpInfo');
        emailOtpInfo.textContent = '';
        document.querySelectorAll('.otp-input').forEach(el => el.classList.remove('error', 'success'));
        
        if (emailOtp.length !== 6) { 
            emailOtpInfo.textContent = 'Please enter the 6-digit email code.'; 
            document.querySelectorAll('.email-otp').forEach(el => el.classList.add('error'));
            toggleButtonLoading(verifyBtn, false, 'Verify & Join');
            return; 
        }

        try {
            const { email } = currentOtpSession;
            const res = await fetch(`${API_BASE_URL}/api/verify-email-otp`, { 
                method: 'POST', 
                headers: { 'Content-Type': 'application/json' }, 
                body: JSON.stringify({ email, otp: emailOtp }) 
            });
            const data = await res.json();
            
            if (data.ok) { 
                document.querySelectorAll('.email-otp').forEach(el => el.classList.add('success'));
                emailOtpInfo.textContent = ''; 
                clearInterval(otpTimerInterval); 
                setTimeout(() => show('success-screen', false), 350); 
            } else { 
                document.querySelectorAll('.email-otp').forEach(el => el.classList.add('error')); 
                emailOtpInfo.textContent = 'Email OTP: ' + (data.err || 'Invalid code'); 
            }
        } catch (err) { 
            emailOtpInfo.textContent = 'A network error occurred.'; 
            console.error(err); 
        }
        finally { toggleButtonLoading(verifyBtn, false, 'Verify & Join'); }
    }


    async function resendOtp() {
        const resendBtn = document.getElementById('resendOtpBtn');
        if (resendBtn.disabled) return;
        resendBtn.disabled = true;
        showToast('Requesting a new email code...');
        try {
            const { email } = currentOtpSession;
            const res = await fetch(`${API_BASE_URL}/api/send-otp`, { 
                method: 'POST', 
                headers: { 'Content-Type': 'application/json' }, 
                body: JSON.stringify({ email, channel: 'email' }) 
            });
            const j = await res.json();
            if (j.ok) {
                showToast('Email code resent.');
                otpExpiryTime = Date.now() + 5 * 60 * 1000;
                startOtpTimer();
                disableResendBtnGlobal(30);
                document.querySelector('.email-otp')?.focus();
            } else { 
                showToast('Error: ' + (j.err || 'Could not resend code'), true); 
                resendBtn.disabled = false; 
            }
        } catch (err) { 
            showToast('A network error occurred.', true); 
            console.error(err); 
            resendBtn.disabled = false; 
        }
    }
    
    function show(newStepId, shouldFocus = true) {
        document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
        document.getElementById(newStepId)?.classList.add('active');
        
        const backButton = document.getElementById('back-button');
        const stepIndex = steps.indexOf(newStepId);

        updateIndicators(stepIndex);
        if (newStepId === 'step2') {
            backButton.classList.remove('hidden');
        } else {
            backButton.classList.add('hidden');
        }

        if (shouldFocus) { 
            const firstInput = document.getElementById(newStepId)?.querySelector('input, .otp-input'); 
            if (firstInput) setTimeout(() => firstInput.focus(), 400); 
        }
    }

    function updateIndicators(activeStepIndex) {
        [document.getElementById('indicator-1'), document.getElementById('indicator-2')].forEach((indicator, index) => {
            (index <= activeStepIndex) ? indicator.classList.add('active') : indicator.classList.remove('active');
        });
        const progressLine = document.getElementById('progress-line-1');
        (activeStepIndex >= 1) ? progressLine.classList.add('active') : progressLine.classList.remove('active');
    }

    function validateStep1() {
        let isEmailValid = false;
        const emailEl = document.getElementById('email');
        const emailError = document.getElementById('email-error');
        if (!/^[^\s@]+@adventz\.com$/.test(emailEl.value)) {
            emailError.textContent = "Please use your official @adventz.com email.";
        } else { 
            emailError.textContent = ""; 
            isEmailValid = true; 
        }
        document.getElementById("sendOtpBtn").disabled = !isEmailValid;
        return isEmailValid;
    }
    
    function setupOtpInputs(containerId, isFinal = false) {
        const inputs = document.querySelectorAll(`#${containerId} .otp-input`);
        inputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                e.target.value = (e.target.value || '').replace(/\D/g, '').slice(0,1);
                if (e.target.value) {
                    if (index < inputs.length - 1) {
                        inputs[index + 1].focus();
                    } else if (isFinal) {
                        verifyOtpAndConfirm();
                    }
                }
            });
            input.addEventListener('keydown', (e) => { 
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    inputs[index - 1].focus(); 
                }
            });
        });
    }
    
    function getOtpValue(otpTypeClass) { return Array.from(document.querySelectorAll(`.${otpTypeClass}`)).map(input => (input.value || '')).join(''); }
    
    function toggleButtonLoading(button, isLoading, loadingText) {
        const btnText = button.querySelector('.btn-text');
        if (isLoading) {
            button.disabled = true;
            btnText.insertAdjacentHTML('beforebegin', '<span class="card-loader"></span>');
            btnText.textContent = loadingText;
        } else {
            button.disabled = false;
            button.querySelector('.card-loader')?.remove();
            if (button.id === 'sendOtpBtn') btnText.textContent = 'Request Access';
            if (button.id === 'verifyOtpBtn') btnText.textContent = 'Verify & Join';
            if (button.id === 'download-card-btn') btnText.textContent = 'Download Card';
            if (button.id === 'claim-card-btn') btnText.textContent = 'Claim Your Card';
        }
    }
    
    function startOtpTimer(){
        const timerEl=document.getElementById('otpTimer');
        clearInterval(otpTimerInterval);
        otpTimerInterval=setInterval(()=>{
            const diff=otpExpiryTime-Date.now();
            if(diff<=0){ timerEl.textContent='Code expired. '; clearInterval(otpTimerInterval); }
            else { const min=Math.floor(diff/60000); const sec=Math.floor((diff%60000)/1000); timerEl.textContent=`Expires in ${min}:${sec.toString().padStart(2,'0')}. `; }
        },1000);
    }
    
    function disableResendBtnGlobal(seconds){
        const resendBtn = document.getElementById('resendOtpBtn');
        resendBtn.disabled = true;
        let counter = seconds;
        const originalText = resendBtn.textContent;
        const interval = setInterval(()=>{
            counter--;
            resendBtn.textContent = `Resend (${counter}s)`;
            if(counter<=0){ 
                resendBtn.disabled = false; 
                resendBtn.textContent = 'Resend Email'; 
                clearInterval(interval); 
            }
        },1000);
    }
    
    function showToast(message, isError = false) {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        toastMessage.textContent = message;
        toast.className = `py-3 px-6 rounded-lg shadow-xl ${isError ? 'bg-red-600 text-white' : 'bg-gray-800 text-white'}`;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }
    
    function clearOtpInputs() {
        document.querySelectorAll('.email-otp').forEach(i => { i.value = ''; i.classList.remove('error','success'); });
        document.getElementById('emailOtpInfo').textContent = '';
        clearInterval(otpTimerInterval); document.getElementById('otpTimer').textContent = '';
        document.getElementById('resendOtpBtn').disabled = true;
        currentOtpSession = { email:'' };
    }

    document.addEventListener('DOMContentLoaded', () => {
        show('step1', false);

        document.getElementById('email').addEventListener('input', validateStep1);
        document.getElementById('email').addEventListener('keydown', e => { if (e.key === 'Enter') sendOtp(); });
        document.getElementById('sendOtpBtn').addEventListener('click', sendOtp);
        setupOtpInputs('email-otp-inputs', true);
        document.getElementById('verifyOtpBtn').addEventListener('click', verifyOtpAndConfirm);
        document.getElementById('resendOtpBtn').addEventListener('click', resendOtp);
        
        const backButton = document.getElementById('back-button');
        backButton.addEventListener('click', () => {
            const currentStepId = document.querySelector('.form-step.active')?.id;
            if (currentStepId === 'step2') { 
                clearOtpInputs(); 
                show('step1', true); 
            }
        });

        // --- New Script for Interactive Gift Modal ---
        const giftIconContainer = document.getElementById('gift-icon-container');
        const interactiveModal = document.getElementById('interactive-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const nameStep = document.getElementById('modal-name-step');
        const cardStep = document.getElementById('modal-card-step');
        const nameInput = document.getElementById('modal-name-input');
        const claimCardBtn = document.getElementById('claim-card-btn');
        const cardMemberNameDisplay = document.getElementById('card-member-name-display');
        const cardMemberId = document.getElementById('card-member-id');
        const downloadCardBtn = document.getElementById('download-card-btn');

        function generateMemberId() {
            const part1 = Math.floor(Math.random() * 9000) + 1000;
            const part2 = Math.floor(Math.random() * 9000) + 1000;
            return `IC-ZF-${part1}-${part2}`;
        }

        function resetModal() {
            nameInput.value = '';
            cardMemberId.textContent = generateMemberId();
            nameStep.classList.add('active');
            cardStep.classList.remove('active');
        }

        function openInteractiveModal() {
            resetModal();
            interactiveModal.classList.add('open');
            giftIconContainer.classList.add('open');
        }

        function closeInteractiveModal() {
            interactiveModal.classList.remove('open');
            giftIconContainer.classList.remove('open');
        }

        if(giftIconContainer) giftIconContainer.addEventListener('click', openInteractiveModal);
        if(closeModalBtn) closeModalBtn.addEventListener('click', closeInteractiveModal);
        if(interactiveModal) interactiveModal.addEventListener('click', (e) => {
            if (e.target.id === 'interactive-modal') {
                closeInteractiveModal();
            }
        });

        if(claimCardBtn) claimCardBtn.addEventListener('click', () => {
            const name = nameInput.value.trim();
            if (name === '') {
                showToast('Please enter your name.', true);
                return;
            }
            cardMemberNameDisplay.textContent = name;
            nameStep.classList.remove('active');
            cardStep.classList.add('active');
        });
        
        if(downloadCardBtn) downloadCardBtn.addEventListener('click', () => {
            const cardElement = document.getElementById('card-to-download');
            toggleButtonLoading(downloadCardBtn, true, 'Preparing...');
            html2canvas(cardElement, { 
                backgroundColor: null, // Transparent background
                scale: 3 // Higher scale for better resolution
            }).then(canvas => {
                const link = document.createElement('a');
                const userName = nameInput.value.trim().replace(/ /g, '_');
                link.download = `Inner_Circle_Card_${userName}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                toggleButtonLoading(downloadCardBtn, false, 'Download Card');
            });
        });


        // --- New Script for Interactive Fundamentals Section ---
        const fundamentalsGrid = document.getElementById('fundamentals-grid');
        const fundamentalsCards = fundamentalsGrid.querySelectorAll('.card');
        let contentWrapper = null;
        let activeCard = null;
        
        function handleMobileScroll() {
            if (window.innerWidth < 768 && contentWrapper) {
                setTimeout(() => {
                    contentWrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 350); // A bit longer to ensure animations are mostly done
            }
        }

        function createAnimatedContent(contentString) {
            const parts = contentString.split('\n');
            let delay = 100;
            return parts.map(part => {
                part = part.replace(/\*\*(.*?)\*\*/g, '<strong class="gold-text font-semibold">$1</strong>');
                if (part.trim().startsWith('-')) {
                    const text = part.trim().substring(1).trim();
                    const html = `<div style="transition-delay: ${delay}ms" class="flex items-start mb-3"><span class="text-xl gold-text mr-3 mt-1">◆</span><span class="text-gray-300">${text}</span></div>`;
                    delay += 100;
                    return html;
                }
                else if (part.trim() !== '') {
                    const html = `<p style="transition-delay: ${delay}ms" class="mb-4">${part}</p>`;
                    delay += 100;
                    return html;
                }
                return '';
            }).join('');
        }

        fundamentalsCards.forEach((card, index) => {
            const data = fundamentalsData.boxes[index];
            const p = card.querySelector('p');
            if (p) {
                p.innerHTML = `${data.snippet} <span class="gold-text font-semibold block mt-2">Read More</span>`;
            }
            card.dataset.index = index;

            card.addEventListener('click', () => {
                const wasActive = card.classList.contains('active');
                const isSwitching = activeCard && activeCard !== card && contentWrapper;

                if (isSwitching) {
                    const oldContentCard = contentWrapper.querySelector('.card');
                    oldContentCard.style.opacity = 0;

                    oldContentCard.addEventListener('transitionend', () => {
                        activeCard.classList.remove('active');
                        card.classList.add('active');
                        activeCard = card;

                        const data = fundamentalsData.boxes[index];
                        let contentHTML = '';
                        if (data.title === "Common Myths") {
                            contentHTML = `
                                <div class="card p-6 md:p-8 rounded-2xl" style="opacity: 0;">
                                    <h3 class="font-serif text-2xl font-bold text-white mb-6 text-left">${data.title}</h3>
                                    <div id="myths-accordion" class="space-y-3 text-left">
                                        ${data.content.map((item) => `
                                            <div class="accordion-item bg-black bg-opacity-20 rounded-lg border border-gray-700">
                                                <button class="accordion-button w-full p-4 flex justify-between items-center text-white font-semibold focus:outline-none">
                                                    <span class="text-left">${item.myth}</span>
                                                    <svg class="w-5 h-5 transform transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                                </button>
                                                <div class="accordion-content border-t border-gray-700 text-gray-400">
                                                    <p class="pt-4 pb-6">${item.truth.replace(/\*\*(.*?)\*\*/g, '<strong class="gold-text font-semibold">$1</strong>')}</p>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            `;
                        } else {
                            const animatedHTML = createAnimatedContent(data.content);
                            contentHTML = `
                                <div class="card p-6 md:p-8 rounded-2xl text-left" style="opacity: 0;">
                                     <h3 class="font-serif text-3xl font-bold text-white mb-6">${data.title}</h3>
                                     <div class="content-reveal text-gray-300 leading-relaxed text-lg">${animatedHTML}</div>
                                </div>
                            `;
                        }
                        contentWrapper.innerHTML = contentHTML;

                        const newContentCard = contentWrapper.querySelector('.card');
                        const newHeight = newContentCard.scrollHeight;
                        contentWrapper.style.maxHeight = newHeight + 'px';
                        
                        setTimeout(() => {
                            newContentCard.style.opacity = 1;
                            const newContentReveal = newContentCard.querySelector('.content-reveal');
                            if(newContentReveal) newContentReveal.classList.add('animate-in');
                        }, 50);

                        handleMobileScroll();

                        if (data.title === "Common Myths") {
                            document.querySelectorAll('#myths-accordion .accordion-button').forEach(button => {
                                button.addEventListener('click', () => {
                                    const content = button.nextElementSibling;
                                    const item = button.parentElement;
                                    item.classList.toggle('open');
                                    
                                    const container = content.closest('#fundamentals-content-wrapper');
                                    if (content.style.maxHeight) {
                                        content.style.maxHeight = null;
                                    } else {
                                        content.style.maxHeight = content.scrollHeight + "px";
                                    }
                                    // Recalculate wrapper height
                                    setTimeout(() => {
                                        container.style.maxHeight = container.querySelector('.card').scrollHeight + 'px';
                                    }, 300); // After accordion animation
                                });
                            });
                        }
                    }, { once: true });
                } else {
                    if (contentWrapper) {
                        contentWrapper.remove();
                        contentWrapper = null;
                    }
                    fundamentalsCards.forEach(c => c.classList.remove('active'));
                    
                    if (!wasActive) {
                        card.classList.add('active');
                        activeCard = card;
                        const data = fundamentalsData.boxes[index];
                        
                        contentWrapper = document.createElement('div');
                        contentWrapper.id = 'fundamentals-content-wrapper';
                        contentWrapper.className = 'col-span-1 md:col-span-2 lg:col-span-4';

                        let contentHTML = '';
                        if (data.title === "Common Myths") {
                            contentHTML = `
                                <div class="card p-6 md:p-8 rounded-2xl">
                                    <h3 class="font-serif text-2xl font-bold text-white mb-6 text-left">${data.title}</h3>
                                    <div id="myths-accordion" class="space-y-3 text-left">
                                        ${data.content.map((item) => `
                                            <div class="accordion-item bg-black bg-opacity-20 rounded-lg border border-gray-700">
                                                <button class="accordion-button w-full p-4 flex justify-between items-center text-white font-semibold focus:outline-none">
                                                    <span class="text-left">${item.myth}</span>
                                                    <svg class="w-5 h-5 transform transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                                </button>
                                                <div class="accordion-content border-t border-gray-700 text-gray-400">
                                                    <p class="pt-4 pb-6">${item.truth.replace(/\*\*(.*?)\*\*/g, '<strong class="gold-text font-semibold">$1</strong>')}</p>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            `;
                        } else {
                             const animatedHTML = createAnimatedContent(data.content);
                             contentHTML = `
                                <div class="card p-6 md:p-8 rounded-2xl text-left">
                                     <h3 class="font-serif text-3xl font-bold text-white mb-6">${data.title}</h3>
                                     <div class="content-reveal text-gray-300 leading-relaxed text-lg">${animatedHTML}</div>
                                </div>
                             `;
                        }
                        
                        contentWrapper.innerHTML = contentHTML;
                        fundamentalsGrid.insertAdjacentElement('afterend', contentWrapper);

                        setTimeout(() => {
                            contentWrapper.classList.add('open');
                            const contentReveal = contentWrapper.querySelector('.content-reveal');
                            if (contentReveal) {
                                setTimeout(() => contentReveal.classList.add('animate-in'), 50);
                            }
                            
                            handleMobileScroll();

                        }, 10);

                        if (data.title === "Common Myths") {
                            document.querySelectorAll('#myths-accordion .accordion-button').forEach(button => {
                                button.addEventListener('click', () => {
                                    const content = button.nextElementSibling;
                                    const item = button.parentElement;
                                    item.classList.toggle('open');
                                    
                                    const container = content.closest('#fundamentals-content-wrapper');
                                    if (content.style.maxHeight) {
                                        content.style.maxHeight = null;
                                    } else {
                                        content.style.maxHeight = content.scrollHeight + "px";
                                    }
                                     // Recalculate wrapper height
                                    setTimeout(() => {
                                        container.style.maxHeight = container.querySelector('.card').scrollHeight + 'px';
                                    }, 300); // After accordion animation
                                });
                            });
                        }
                    } else {
                        activeCard = null;
                    }
                }
            });
        });
        
        const scarcityBar = document.getElementById('scarcity-bar');
        if(scarcityBar) {
            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    setTimeout(() => {
                        scarcityBar.style.width = '78%';
                    }, 300); // Slight delay for effect
                    observer.unobserve(scarcityBar); // Animate only once
                }
            }, { threshold: 0.5 });
            observer.observe(scarcityBar);
        }

    });

    // --- SCRIPT FROM NEW DESIGN (Handles Animations & Smooth Scroll) ---
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
        });
    });

    const faders = document.querySelectorAll('.fade-in');
    const appearOptions = { threshold: 0.2, rootMargin: "0px 0px -50px 0px" };
    const appearOnScroll = new IntersectionObserver(function(entries, observer) {
        entries.forEach(entry => {
            if (!entry.isIntersecting) return;
            else { entry.target.classList.add('visible'); observer.unobserve(entry.target); }
        });
    }, appearOptions);
    faders.forEach(fader => { appearOnScroll.observe(fader); });

</script>
</body>
</html>

